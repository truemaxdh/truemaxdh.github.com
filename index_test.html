<html>
  <head>
    <title>MyCoding</title>
    <link rel="stylesheet" href="/Style/skin.css">
    <script>
      var genres = [];
      var appList = [];
      //
      window.onload = function() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4) {
            if (this.status == 200) {
              // SUCCESS
              var json = this.responseText;
              appList = JSON.parse(json).AppList;
              /*var board = document.getElementById("contents");
              for (var i = 0; i < appList.length; i++) {
                board.innerHTML += "<div class='card'>" +
                  "<p class='Title'>" + appList[i].Title + "</p>" +
                  "<img class='Thumb' src='" + appList[i].Thumb + "'>" +
                  "<p class='ShortDesc'>" + appList[i].ShortDesc + "</p>" +
                  "<p class='Desc'>" + appList[i].Desc + "</p>" +
                  "<a class='Play' href='" + appList[i].Play + "'></a>" +
                  "<a class='Android' href='" + appList[i].Android + "</p>" +
                  "</div>";
              }*/
              for (var i = 0; i < appList.length; i++) {
                var gnre = appList[i].Genre;
                if (genres.find(function(el) {return el==gnre;}) == undefined) {
                  genres.push(gnre);
                }
              }
              openGenres();
            } else {
              alert("failed to load data");
            }
          }
        }
        xhttp.open("GET", "/contents/AppList.json", true);
        xhttp.send();
      }
      
      function openGenres() {
        var board = document.getElementById("contents");
        var crcl_w = 0;
        for (var i = 0; i < genres.length; i++) {
          var crcl = document.createElement("div");
          crcl.className = "bigCircle";
          crcl.innerHTML = genres[i];
          crcl.onclick=function() {openCategory(this.innerHTML);}
          board.appendChild(crcl);
        }
        var wrap = document.getElementById("wrapper");
        wrap.style.width = (genres.length * 320) + "px";
      }
      
      function openCategory(_gnre) {
        var board = document.getElementById("list");
        board.innerHTML = "";
        for (var i = 0; i < appList.length; i++) {
          if (_gnre == appList[i].Genre) {
            var crcl = document.createElement("div");
            crcl.className = "circle";
            crcl.innerHTML = appList[i].Title;
            crcl.style.backgroundImage = "url('" + appList[i].Thumb + "')";
            var tmp = "window.open('" + appList[i].Play + "');";
            crcl.onclick=function() {eval(tmp)}
            board.appendChild(crcl);
          }
        }
      }
    </script>
  </head>
  <body>
    <div id="wrapper">
      <center><h1>MyCoding</h1></center>
      <center><hr></center>
      <p>&nbsp;</p>
      <div id="contents"></div>
      <p>&nbsp;</p>
      <div id="list"></div>
    </div>
  </body>
</html>
